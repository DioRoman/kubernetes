# Запуск и управление приложениями nginx и multitool в microK8s

### Создание Deployment с двумя контейнерами
- Создан Deployment `nginx-multitool`, состоящий из двух контейнеров: nginx и multitool (wbitt/network-multitool).
- Контейнер multitool настроен с переменной окружения `HTTP_PORT=8080` и соответствующим портом.

### Init-контейнер и его назначение
- В Deployment добавлен init-контейнер на базе busybox, который выполняется до запуска основных контейнеров.
- Init-контейнер проверяет доступность сервиса приложения через DNS-запросы и не завершается, пока сервис не станет доступен.
- Такой механизм обеспечивает контроль запуска: основные контейнеры (nginx и multitool) стартуют только после успешного выполнения init-контейнера.
- Init-контейнеры предназначены для подготовки окружения или выполнения предварительных условий, отделяя вспомогательные задачи от основного приложения и увеличивая надёжность запуска.

### Настройка Service для доступа к приложениям
- Создан Kubernetes Service с двумя портами (80 для nginx и 8080 для multitool) с типом NodePort для доступа к приложениям внутри и снаружи кластера.
- Проверено, что сервис связан с подами через корректные селекторы меток.

### Тестирование сетевого взаимодействия
- Создан отдельный Pod с контейнером multitool для теста доступа к сервисам nginx и multitool внутри кластера.
- Использован `curl` изнутри этого Pod для проверки доступности сервисов по соответствующим портам.

***
Таким образом, благодаря init-контейнеру реализован точный контроль последовательности запуска компонентов и подготовка условий для стабильной работы микросервисов в microK8s.

Init-контейнеры запускаются последовательно и должны успешно завершиться, чтобы основной контейнер мог стартовать. Они эффективны для выполнения задач инициализации, таких как ожидание сервисов, подготовка конфига, или выполнение миграций, что упрощает управление сложными приложениями в Kubernetes.

Такой подход обеспечивает надёжный запуск, масштабируемость и доступность сервисов nginx и multitool в среде microK8s, подходящей для локальной разработки и тестирования микросервисов. 

MicroK8s позволяет эффективно управлять Kubernetes-объектами и сервисами с минимальным расходом ресурсов и быстрой настройкой.
